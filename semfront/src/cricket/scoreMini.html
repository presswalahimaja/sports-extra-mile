<!DOCTYPE html>
<html lang="en" ng-app="sem" prefix="og: http://ogp.me/ns#">
    <head>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-7999525691080451",
                enable_page_level_ads: true
            });
        </script>
        <title>Cricket Scorecard - Sports Extra Mile</title>
        <meta charset="utf-8" />
        @@include('gtmhead.html')
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <meta name="description" content="Sports social network to encourage people to be more active, healthier & connected by promoting activities, facilities & discussions" />
        <meta name="keywords" content="sports, social network, facility, event, discussions, players, coaches, Aerobics,Archery, Badminton, Basketball, Boxing, Chess, Cricket, Cycling, Fencing, Football, Golf, Gym, Gymnastics, Handball, Hiking, Hockey, Kabaddi, Khokho, Running, Shooting, Skating, Squash, Swimming, Table Tennis, Tennis, Volleyball, Water Sports, Wrestling, Yoga" />
        <meta content="Sports social network to encourage people to be more active, healthier & connected by promoting activities, facilities & discussions" property="og:description" />
        <meta content="Sports Extra Mile" property="og:site_name" />
        <meta content="website" property="og:type" />
        <meta content="https://www.sportsextramile.com/" property="og:url" />
        <meta content="https://www.sportsextramile.com/img/og.png" property="og:image" />
        <link rel="icon" sizes="16x16" type="image/x-icon" href="//www.sportsextramile.com/favicon.ico" />

        @@if (doConcat === 1) {
        @@loop('css.html', [ 
        { "file": "common.css"}, 
        { "file": "sxm-common.css"}
        ]) 
        }
        @@if (doConcat !== 1) {
        @@loop('css.html', [ 
        { "file": "bootstrap.min.css"}, 
        { "file": "xeditable.min.css"},
        { "file": "chartist.min.css"},
        { "file": "ngdialog.css"}, 
        { "file": "ngDialog-theme-default.css"}, 
        { "file": "login.css"}, 
        { "file": "facilities.css"}, 
        { "file": "profile.css"},
        { "file": "detail.css"},
        { "file": "style.css"}, 
        { "file": "static.css"},
        { "file": "select.css"},
        { "file": "events-cricket-admin1.css"}
        ])
        }

        @@if (doConcat === 1) {
        @@loop('scripts.html', [ 
        { "file": "angular.js"}, 
        { "file": "sxm-common.js"}
        ]) 
        }
        @@if (doConcat !== 1) {
        @@loop('scripts.html', [
        { "file": "lib/angular1.4.5.min.js"},
        { "file": "lib/xeditable-0.2.0.js"},
        { "file": "lib/angular-datepicker.js"},
        { "file": "lib/textAngular-rangy.min.js"},
        { "file": "lib/textAngular-sanitize.min.js"},
        { "file": "lib/textAngular.min.js"},
        { "file": "lib/select.min.js"},
        { "file": "lib/ngdialog.js"},
        { "file": "shared.js"},
        { "file": "anghome.js"},
        { "file": "user.js"},
        { "file": "header.js"}
        ])
        }
        <style>
            .bigscreenstyle{padding:10px;font-size:85px;float:left;width:100%;}
        </style>
    </head>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=@@gkey"></script>
    <script  src="/js/sports/Cricket.js"></script>
    <script  type='text/javascript'>
            function CricketScoreViewCtrl(API, auth, GeneralService, $timeout, $window) {
                var self = this;
                self.eid = GeneralService.getParam("id"); // eventid
                self.scorecard;
                self.matchStarted = false;
                self.isMobile = (function (a) {
                    if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) {
                        return true;
                    } else {
                        return false;
                    }
                })(navigator.userAgent || navigator.vendor || window.opera);

                // Load current event details
                self.getMatchDetails = function () {
                    GeneralService.loadEventWithPlayers(self.eid).then(function (results) {
                        var data;
                        if (typeof results === "object") {
                            var status = results.data ? results.data.success : null;
                            if (status) {
                                data = results.data.extras.data.event;
                            }
                        } else {
                            results = JSON.parse(results);
                            var status = true;
                            data = results;
                        }

                        if (status) {
                            self.event = data;
                            if (self.event.scid) {
                                if (!angular.isUndefinedOrNull(self.event.toss) && angular.isUndefinedOrNull(self.event.score.isFinished))
                                    self.matchStarted = true;
                                else
                                    self.matchStarted = false;
                                if (self.event.participants[0].pid === self.event.toss.pid) {
                                    if (self.event.toss.decision === "Bat") {
                                        self.batIndex = 0;
                                        self.bowlIndex = 1;
                                    } else {
                                        self.batIndex = 1;
                                        self.bowlIndex = 0;
                                    }
                                } else {
                                    if (self.event.toss.decision === "Bat") {
                                        self.batIndex = 1;
                                        self.bowlIndex = 0;
                                    } else {
                                        self.batIndex = 0;
                                        self.bowlIndex = 1;
                                    }
                                }
                                if (self.batIndex === 0) {
                                    self.team1 = {'id': self.event.participants[0].pid, 'name': self.event.participants[0].name, 'players': self.event.members[0].users};
                                    self.team2 = {'id': self.event.participants[1].pid, 'name': self.event.participants[1].name, 'players': self.event.members[1].users};
                                } else {
                                    self.team1 = {'id': self.event.participants[1].pid, 'name': self.event.participants[1].name, 'players': self.event.members[1].users};
                                    self.team2 = {'id': self.event.participants[0].pid, 'name': self.event.participants[0].name, 'players': self.event.members[0].users};
                                }
								
								if(self.event.score.score){
									self.scorecard = self.event.score.score;
									
									// Team - 1 Yet to Bat
									self.team1YetToBat = [];
									var team1Batting = self.scorecard.innings[0].batting.map(function (obj) {
										return obj.name;
									});
									angular.forEach(self.team1.players, function (player, index) {
										if (team1Batting.indexOf(player.userName) == -1)
											self.team1YetToBat.push(player);
									});

									// Team - 2 Yet to Bat
									self.team2YetToBat = [];
									var team2Batting = self.scorecard.innings[1].batting.map(function (obj) {
										return obj.name;
									});
									angular.forEach(self.team2.players, function (player, index) {
										if (team2Batting.indexOf(player.userName) == -1)
											self.team2YetToBat.push(player);
									});

									self.currInning = "";
									self.currInningBatting = [];
									if (self.matchStarted && angular.isUndefinedOrNull(self.event.result)) {
										// team - 1 RR
										self.team1RR = (self.scorecard.innings[0].score / (self.scorecard.innings[0].overs + (0.1666 * self.scorecard.innings[0].balls))).toFixed(2);

										if (self.scorecard.innings[1].batting.length == 0) {
											self.currInning = "Inning1";
											self.currInningBatting = self.scorecard.innings[0].batting;
										} else {
											self.currInning = "Inning2";
											self.currInningBatting = self.scorecard.innings[1].batting;

											// team - 2 RR
											self.team2RR = (self.scorecard.innings[1].score / (self.scorecard.innings[1].overs + (0.1666 * self.scorecard.innings[1].balls))).toFixed(2);
											self.rruns = self.scorecard.innings[0].score + 1 - self.scorecard.innings[1].score;
											self.pballs = self.event.overs * 6 - (self.scorecard.innings[1].overs * 6 + self.scorecard.innings[1].balls);
											if (self.rruns < 0) {
												self.rruns = 0;
											}
											self.RRR = ((self.rruns) / (self.pballs / 6)).toFixed(2);
										}
									}
								}                                

                                // auto page reloads 							
                                if (self.matchStarted) {
                                    $timeout(function () {
                                        //$window.location.reload();
                                        self.getMatchDetails();
                                    }, 5000);
                                }
                            }
                        } else {
                            console.log("Error loading data.");
                        }
                    });
                }
                self.getMatchDetails();
            }
            ;
            angular.module('sem')
                    .controller('CricketScoreView', CricketScoreViewCtrl)
    </script>
    <body ng-controller="CricketScoreView as crick" ng-cloak style="overflow:hidden;">
        @@include('gtmbody.html')
        <div>
            <div class="row content scorecardview">
                <!-- Left Panel -->
                <div class="col-md-12 myPageContent">
                    <div class="row">
                        <div class="matchStateSection">
                            <div class="col-md-12">
                                <div class="card" style="background:#000000;color:#ffffff;min-height:800px;">
									<!-- Toss details -->
									<div class="bigscreenstyle" ng-if="crick.scorecard === undefined && crick.event.toss">
										{{::crick.event.toss.name}} won the toss and {{::crick.event.toss.decision}} first.
									</div>									
                                    <!-- 1st Inning score -->
									<div class="bigscreenstyle" ng-if="crick.currInning == 'Inning1'">
                                        <span class="cb-col cb-col-50">{{::crick.scorecard.innings[0].name}}</span>
                                        <span class="cb-col cb-col-50 text-right">{{crick.scorecard.innings[0].score}}/{{crick.scorecard.innings[0].W}} ({{crick.scorecard.innings[0].overs}}.{{crick.scorecard.innings[0].balls}} Ovs)</span>
                                    </div>
                                    <!-- 2nd Inning score -->
									<div class="bigscreenstyle" ng-if="crick.currInning == 'Inning2'">
                                        <span class="cb-col cb-col-50">{{::crick.scorecard.innings[1].name}}</span>
                                        <span class="cb-col cb-col-50 text-right">{{crick.scorecard.innings[1].score}}/{{crick.scorecard.innings[1].W}} ({{crick.scorecard.innings[1].overs}}.{{crick.scorecard.innings[1].balls}} Ovs)</span>
                                    </div>
									<!-- Current batting players -->
                                    <div ng-class="{onstrike: crick.currInning != '' && crick.scorecard.SI == $index}" ng-repeat="batsman in crick.currInningBatting" ng-if="batsman.batting" style="padding:10px;font-size:85px;float:left;width:100%;">
                                        <span class="cb-col cb-col-50">{{batsman.name | playerFirstName}}<span ng-if="crick.currInning != '' && crick.scorecard.SI == $index">*</span></span>
                                        <span class="cb-col cb-col-50 text-right">{{batsman.total}} ({{batsman.balls}})</span>
                                    </div>	
									<!-- Required Rate information -->	
                                    <div ng-if="crick.currInning == 'Inning2' && crick.matchStarted" style="padding:10px;font-size:85px;float:left;width:100%;">Need <strong>{{crick.rruns}}</strong> runs in <strong>{{crick.pballs}}</strong> balls</div>
									<!-- Match result -->
									<div ng-if="crick.scorecard != undefind && crick.event.result != undefind" style="padding:10px;font-size:85px;float:left;width:100%;">
										<div ng-if="crick.scorecard.innings[0] != undefined && crick.scorecard.innings[0].batting.length > 0">{{::crick.scorecard.innings[0].name}} <span style="float:right">{{crick.scorecard.innings[0].score}}/{{crick.scorecard.innings[0].W}} ({{crick.scorecard.innings[0].overs}}.{{crick.scorecard.innings[0].balls}} Ovs)</span></div>
										<div ng-if="crick.scorecard.innings[1] != undefined && crick.scorecard.innings[1].batting.length > 0">{{::crick.scorecard.innings[1].name}} <span style="float:right">{{crick.scorecard.innings[1].score}}/{{crick.scorecard.innings[1].W}} ({{crick.scorecard.innings[1].overs}}.{{crick.scorecard.innings[1].balls}} Ovs)</span></div>
										<div ng-if="crick.event.result != undefind" style="font-size:65px;">
											<div ng-if="crick.event.result.matchStatus === 'concluded'">
												{{crick.event.result.winner.name}} won by {{crick.event.result.by}}
											</div>
											<div ng-if="crick.event.result.mom">
												Man of the match <span class="text-bold">{{crick.event.result.mom.name | playerFirstName}}</span>
											</div>
										</div>										
									</div>
								</div>
                            </div>	
                        </div>
                    </div>		
                </div>
            </div>
        </div>
        <!-- Footer -->
        @@include('footer.html')
        @@include('footerscripts.html')
        <script type="text/javascript" src="/script/main.js"></script>
    </body>
</html>